<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Ring Size Finder</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #2c4a4a;
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  h1 {
    color: white;
    margin-top: 20px;
  }
  .step {
    background: #ffecec;
    padding: 20px;
    border-radius: 10px;
    width: min(98vw, 1250px);
    box-sizing: border-box;
    text-align: center;
    margin-bottom: 20px;
  }
  .step h2 {
    margin: 0 0 10px;
  }
  /* Shared box style for both steps */
  .stage {
    position: relative;
    width: 100%;
    max-width: 1200px;
    height: clamp(320px, 54vh, 520px);
    margin: 8px auto 10px;
    background: #fff;
    border: 1px solid #ffb3b3;
    border-radius: 12px;
    overflow: hidden;
    display: grid;
    place-items: center;
  }
  /* Credit card */
  #creditCard {
    width: 400px;
    height: calc(400px * 0.63084); /* ratio 8.56 × 5.398 cm */
    background: lightgray;
    border: 2px solid black;
    border-radius: 8px;
  }
  /* Ring sizer circle */
  #sizerCircle {
    border: 3px dotted black;
    border-radius: 50%;
    background-color: lightgray;
    width: 40mm;
    height: 40mm;
  }
  /* Controls */
  .controls {
    margin-top: 10px;
  }
  button {
    padding: 6px 12px;
    margin: 0 3px;
    border: 1px solid #ccc;
    background: white;
    cursor: pointer;
    border-radius: 6px;
  }
  /* Sizes display */
  .sizes {
    display: flex;
    justify-content: space-between;
    margin-top: 10px;
  }
  .size-box {
    flex: 1;
    margin: 0 5px;
    padding: 10px;
    border-radius: 8px;
    background: #fff;
    border: 1px solid #ccc;
    font-size: 18px;
    text-align: center;
  }
  .size-label {
    display: block;
    font-size: 12px;
    color: gray;
  }
  .size-value {
    font-weight: bold;
    font-size: 20px;
  }
</style>
</head>
<body>

<h1>Ring Size Finder</h1>

<!-- Step 1: Calibrate -->
<div class="step">
  <h2>Step 1: Calibrate Your Screen</h2>
  <p>Resize the rectangle to match a real credit card (8.56 cm × 5.398 cm).</p>
  <div class="stage">
    <div id="creditCard"></div>
  </div>
  <div class="controls">
    <button onclick="resizeCard(-5)">-</button>
    <button onclick="resizeCard(5)">+</button>
  </div>
  <div class="controls">
    <button onclick="skipCalibration()">Skip calibration</button>
    <button onclick="nextStep()">Next</button>
  </div>
</div>

<!-- Step 2: Measure -->
<div class="step" style="display:none;">
  <h2>Step 2: Measure Your Ring Size</h2>
  <p>Place your ring on the screen and match the circle to the <b>inner edge</b>.</p>
  <div class="stage">
    <div id="sizerCircle"></div>
  </div>
  <div class="controls">
    <button onclick="resizeCircle(-0.5)">-</button>
    <button onclick="resizeCircle(0.5)">+</button>
    <button onclick="resetCircle()">Reset to 18 mm</button>
  </div>
  <div id="diameter" style="font-weight:bold; margin-top:5px;">Diameter: 18.0 mm</div>
  <div class="sizes">
    <div class="size-box"><span class="size-label">US</span><span id="usSize" class="size-value">8</span></div>
    <div class="size-box"><span class="size-label">UK</span><span id="ukSize" class="size-value">P</span></div>
    <div class="size-box"><span class="size-label">EU</span><span id="euSize" class="size-value">57</span></div>
  </div>
</div>

<script>
  let creditCard = document.getElementById('creditCard');
  let sizerCircle = document.getElementById('sizerCircle');
  let calibrated = false;
  let pxPerMM = 3.78; // default approx
  let cardWidthMM = 85.6;
  let circleDiameterMM = 18.0;

  function resizeCard(change) {
    let newWidth = creditCard.offsetWidth + change;
    creditCard.style.width = newWidth + 'px';
    creditCard.style.height = (newWidth * 0.63084) + 'px';
    pxPerMM = newWidth / cardWidthMM;
  }

  function skipCalibration() {
    calibrated = false;
    document.querySelectorAll('.step')[0].style.display = 'none';
    document.querySelectorAll('.step')[1].style.display = 'block';
  }

  function nextStep() {
    calibrated = true;
    pxPerMM = creditCard.offsetWidth / cardWidthMM;
    document.querySelectorAll('.step')[0].style.display = 'none';
    document.querySelectorAll('.step')[1].style.display = 'block';
  }

  function resizeCircle(change) {
    circleDiameterMM += change;
    updateCircle();
  }

  function resetCircle() {
    circleDiameterMM = 18.0;
    updateCircle();
  }

  function updateCircle() {
    sizerCircle.style.width = (circleDiameterMM * pxPerMM) + 'px';
    sizerCircle.style.height = (circleDiameterMM * pxPerMM) + 'px';
    document.getElementById('diameter').innerText = `Diameter: ${circleDiameterMM.toFixed(1)} mm`;
    updateSizes();
  }

  function updateSizes() {
    const sizeChart = {
      "US": { "18.1": "8" },
      "UK": { "18.1": "P" },
      "EU": { "18.1": "57" }
    };
    document.getElementById('usSize').innerText = "8";
    document.getElementById('ukSize').innerText = "P";
    document.getElementById('euSize').innerText = "57";
  }

  updateCircle();
</script>
</body>
</html>
